<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Evelien Admission</title>
        <meta name="keywords" content="Art School, Admission, Portfolio, Project">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="admission.css">
    </head>

    <body>
        <section class="section-1">
            <h2>Section 1</h2>
        </section>
        <section class="section-2">
            <h2>Section 2</h2>
        </section>
        <section class="section-3">
            <h2>Section 3</h2>
        </section>
        <section class="section-4">
            <div class="top-banner" id="top"></div>
            <div class="left-banner" id="left"></div>
            <div class="right-banner" id="right"></div>
            <div class="bottom-banner" id="bottom"></div>
            <img class="sticky-panel" src="me_when.jpg" alt="A crowd of protestors" />
        </section>
        <section class="section-5">
            <h2>Section 5</h2>
        </section>
        <section class="section-6">
            <h2>Section 6</h2>
        </section>
    </body>
</html>

<script>

    function stickier(entries) {
        entries.forEach(entry => {
            
            entry.target.style.top = "0vh";
            //entry.target.style.position = "sticky";
            
        })
    }

    function scrollLeft(entries) {
        entries.forEach(entry => {
            r = entry.intersectionRatio
            //console.log(entry);
            leftbar = document.getElementById("left")

            entry.target.style.tranform = 'rotate(' + r + 'turn);';
        })
    }

    function scrollRight(entries) {
        entries.forEach(entry => {
            r = entry.intersectionRatio
            console.log(entry);
            document.getElementById("right").transform = 'rotate(' + r + 'turn);';
        })
    }
    
    const section4 = document.querySelector("section.section-4");
    const section5 = document.querySelector("section.section-5");
    const section6 = document.querySelector("section.section-6");

    const viewportCollider = {
        root: null, //default; browser viewport, targets intersectional element
        threshold: 1, //default; 0, percentage of target that should be visible
        rootMargin: "0px", //margin difference from threshold
    }

    const gradualOverlay = {
        root: null, //default; browser viewport, targets intersectional element
        threshold: [0, 0.25, 0.5, 0.75, 1.0], //default; 0, percentage of target that should be visible
        rootMargin: "0px", //margin difference from threshold
    }

    const stickyObserver = new IntersectionObserver(stickier, viewportCollider);
    stickyObserver.observe(section4);

    const leftbarScroller = new IntersectionObserver(scrollLeft, gradualOverlay);
    leftbarScroller.observe(section5);



    //current implementation plan

    //observer for sidebars and section 3 intersection, to gradually go offscreen.
    //  use transform margin / total width times "entry.intersectionRatio" variable so scrolling back up reverses the process
    //

    //use two sections that zoom out the total crowd img when scrolled over with sticky. 

    //resources consulted:
    //  https://daveyhert.medium.com/revealing-contents-on-scroll-using-javascripts-intersection-observer-api-ab09f4faec77
    //  https://blog.webdevsimplified.com/2022-01/intersection-observer/

</script>

